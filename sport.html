<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda Online - Hombre</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles2.css">
</head>
<body>
    <header class="bg-light py-3">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-3">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Buscar productos...">
                        <div class="input-group-append">
                            <button class="btn btn-outline-secondary" type="submit">Buscar</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <nav class="navbar navbar-expand-md navbar-light bg-light justify-content-center">
                        <ul class="navbar-nav">
                            <li class="nav-item"><a class="nav-link" href="mujer.html">Mujer</a></li>
                            <li class="nav-item"><a class="nav-link " href="hombre.html">Hombre</a></li>
                            <li class="nav-item"><a class="nav-link" href="ninos.html">Niños</a></li>
                            <li class="nav-item"><a class="nav-link active" href="sport.html">Sport</a></li>
                            <li class="nav-item"><a class="nav-link" href="rebajas.html">Rebajas</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="col-md-3 text-right">
                    <div class="position-relative d-inline-block">
                        <span class="badge badge-pill badge-danger position-absolute" style="top: -10px; right: -10px;" id="cantidad-carrito">0</span>
                        <img src="img-tienda2/Logotipo Carrito de Compras de Supermercado Minimalista Naranja y Rojo.png" alt="Carrito" width="60">
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container mt-4">
        <p class="lead">Explora nuestra selección de productos para hombre con los mejores precios.</p>
        <div class="row">
            <div class="col-md-9">
                <div class="row row-cols-1 row-cols-md-3 g-4">
                     <div class="col">
                        <div class="card h-100">
                            <img src="https://indoorsport.co/cdn/shop/files/CAMISETA-AZUL-OSCURO-FRENTE.jpg?v=1698205849&width=1445" class="card-img-top" alt="Camiseta sport">
                            <div class="card-body text-center">
                                <h5 class="card-title nombre-producto">Camiseta sport</h5> 
                                <p class="card-text precio">$18.49</p> 
                                <button class="btn btn-primary boton-agregar">Añadir al carrito</button>
                            </div>
                        </div>
                     </div>
                    <div class="col">
                        <div class="card h-100">
                            <img src="https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcSQRPMY76gO8IjPWHYQGizvfIqeAvCj9YSQdrMWxKJkTmCaqW9Us7RwkRvj7Me6xUSFzhOp8t1KbKhLycVshtoOWfeHU658j-JGG1jOpAisWG3kARyhIrPH" class="card-img-top" alt="Short deportivo">
                            <div class="card-body text-center">
                                <h5 class="card-title nombre-producto">Short deportivo</h5>
                                <p class="card-text precio">$11.89</p>
                                <button class="btn btn-primary boton-agregar">Añadir al carrito</button>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card h-100">
                            <img src="https://encrypted-tbn2.gstatic.com/shopping?q=tbn:ANd9GcRy66W-4d33Gu82A8zhdPonzY_xBA9YW9gJukk7TnlMjfLEpRAlQJ0gJ0t1txFWt9wNb-NYHmGCRlGEWze4qMyoMIfG2prMkhXjo1a_x3Nq" class="card-img-top" alt="Pantaloneta">
                            <div class="card-body text-center">
                                <h5 class="card-title nombre-producto">Pantaloneta</h5>
                                <p class="card-text precio">$13.89</p>
                                <button class="btn btn-primary boton-agregar">Añadir al carrito</button>
                            </div>
                        </div>
                    </div>
                  <div class="col">
                        <div class="card h-100">
                            <img src="https://encrypted-tbn3.gstatic.com/shopping?q=tbn:ANd9GcRB75MLA2jKqrOfjvnxpkkJSR4dTuUW9PAPUPM_6q6wEM2sCbJaUrTbitQCdSobTtXIvteNgyUdCEPB1Ql7m2xFpXGycz5MfYvXEGnm0McrIr-5dBv4P4oW" class="card-img-top" alt="Buzo deportivo">
                            <div class="card-body text-center">
                                <h5 class="card-title nombre-producto">Buzo deportivo</h5>
                                <p class="card-text precio">$8.99</p>
                                <button class="btn btn-primary boton-agregar">Añadir al carrito</button>
                            </div>
                        </div>
                    </div>
                  <div class="col">
                        <div class="card h-100">
                            <img src="https://encrypted-tbn3.gstatic.com/shopping?q=tbn:ANd9GcRTIFM4PXTRruXA0Jk9dup4nIYb4KKyb_RMu5Xuf47nnbG4wZrwxP_on6rJnc8vbM6FxngrVCTGk6I4akH-T0SK9EF_4pTEEPQKqz5BSX-S8NQKzCoFi4pJ" class="card-img-top" alt="Pantalón deportivo">
                            <div class="card-body text-center">
                                <h5 class="card-title nombre-producto">Pantalón deportivo</h5>
                                <p class="card-text precio">$14.99</p>
                                <button class="btn btn-primary boton-agregar">Añadir al carrito</button>
                            </div>
                        </div>
                    </div>
                    </div>
            </div>
            <div class="col-md-3">
                <aside class="ordenamiento">
                    <h4>Ordenar por:</h4>
                    <select class="form-control" id="ordenar-productos">
                        <option value="precio-asc">Precio (Menor a Mayor)</option>
                        <option value="precio-desc">Precio (Mayor a Menor)</option>
                        <option value="nombre-asc">Nombre (A-Z)</option>
                        <option value="nombre-desc">Nombre (Z-A)</option>
                    </select>
                </aside>
                <div class="carrito-detalle mt-4">
                    <h2>Carrito de Compras</h2>
                    <div id="lista-carrito">
                        </div>
                    <p id="total-carrito">Total: $0.00</p>
                    <a href="https://DC2707.github.io/Tienda-Moda-2.github.io/Formulario de pago.html">
                        <button id="boton-comprar" class="btn btn-success btn-block">Comprar</button>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container text-center">
            <p>&copy; 2025 David Morales</p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
   
    const cantidadCarritoElement = document.getElementById('cantidad-carrito');
    const listaCarritoElement = document.getElementById('lista-carrito');
    const totalCarritoElement = document.getElementById('total-carrito');
    const botonComprar = document.getElementById('boton-comprar');
    const carrito = [];

    function actualizarCarritoVisual() {
        cantidadCarritoElement.textContent = carrito.length;
        listaCarritoElement.innerHTML = '';
        let total = 0;

        carrito.forEach((item, index) => {
            const itemDiv = document.createElement('div');
            itemDiv.classList.add('item-en-carrito');
            let detallesTalla = item.talla ? `<span class="detalle-talla">Talla: ${item.talla}</span>` : '';
            itemDiv.innerHTML = `
                <img src="${item.imagen}" alt="${item.nombre}" width="50">
                <p>${item.nombre} ${detallesTalla}</p>
                <p>${item.precio}</p>
                <span class="cantidad-item">(${item.cantidad})</span>
                <button class="boton-eliminar-item" data-index="${index}">Eliminar</button>
            `;
            listaCarritoElement.appendChild(itemDiv);
            total += parseFloat(item.precio.replace('$', '')) * item.cantidad;
        });

        totalCarritoElement.textContent = `Total: $${total.toFixed(2)}`;

        const botonesEliminarItem = document.querySelectorAll('.boton-eliminar-item');
        botonesEliminarItem.forEach(boton => {
            boton.addEventListener('click', function() {
                const indexAEliminar = parseInt(this.dataset.index);
                carrito.splice(indexAEliminar, 1);
                actualizarCarritoVisual();
            });
        });
    }

    //añadir al carrito
    function agregarAlCarrito(event) {
        const boton = event.target;
        const cardBody = boton.closest('.card-body');
        const card = boton.closest('.card');

        if (!cardBody || !card) {
            console.error("No se encontró el elemento padre '.card-body' o '.card' para el botón.");
            return;
        }

        const imagenSrc = card.querySelector('img').src;
        const precioTexto = cardBody.querySelector('.precio').textContent;
        const nombre = cardBody.querySelector('.nombre-producto').textContent;
        const selectorTalla = cardBody.querySelector('.talla-select');
        let tallaSeleccionada = selectorTalla ? selectorTalla.value : null;

        // Aquí podrías agregar la lógica para pedir talla si es necesario
        const productoExistente = carrito.find(item => item.nombre === nombre && item.talla === tallaSeleccionada);

        if (productoExistente) {
            productoExistente.cantidad++;
        } else {
            carrito.push({
                imagen: imagenSrc,
                precio: precioTexto,
                nombre: nombre,
                cantidad: 1,
                talla: tallaSeleccionada
            });
        }
        actualizarCarritoVisual();
    }
         botonComprar.addEventListener('click', () => {

                if (carrito.length > 0) {

                    alert('¡Gracias por tu compra!');

                    carrito.length = 0;

                    actualizarCarritoVisual();

                } else {

                    alert('El carrito está vacío. ¡Agrega algunos productos!');

                }

            });



            actualizarCarritoVisual();

    //Función para adjuntar event listeners al botón "Añadir al carrito"
    function adjuntarEventListenersCarrito() {
        
        const botonesAgregarNuevos = document.querySelectorAll('.row.row-cols-1.row-cols-md-3.g-4 .boton-agregar');
        botonesAgregarNuevos.forEach(boton => {
            boton.removeEventListener('click', agregarAlCarrito); //Evitar duplicados si se llama varias veces
            boton.addEventListener('click', agregarAlCarrito);
        });
    }

    
    const barraBusquedaInput = document.querySelector('.input-group input[type="text"]');
    const botonBusqueda = document.querySelector('.input-group button[type="submit"]');
    const productosContainer = document.querySelector('.row.row-cols-1.row-cols-md-3.g-4');
    const productosOriginales = Array.from(productosContainer.children);

    function filtrarProductos(textoBusqueda) {
        const textoLower = textoBusqueda.toLowerCase();
        productosContainer.innerHTML = ''; 

        let productosFiltrados = productosOriginales.filter(producto => {
            const nombreProducto = producto.querySelector('.nombre-producto').textContent.toLowerCase();
            const precioProducto = producto.querySelector('.precio').textContent.toLowerCase(); 

            return nombreProducto.includes(textoLower) || precioProducto.includes(textoLower);
        });

        if (productosFiltrados.length === 0) {
            productosContainer.innerHTML = '<p class="col-12 text-center">No se encontraron productos.</p>';
        } else {
            productosFiltrados.forEach(producto => {
                productosContainer.appendChild(producto.cloneNode(true)); 
            });
        }
        adjuntarEventListenersCarrito();
    }

    botonBusqueda.addEventListener('click', (e) => {
        e.preventDefault(); 
        const textoBusqueda = barraBusquedaInput.value.trim();
        filtrarProductos(textoBusqueda);
    });

    barraBusquedaInput.addEventListener('input', () => {
        const textoBusqueda = barraBusquedaInput.value.trim();
        filtrarProductos(textoBusqueda);
    });


    const ordenarSelect = document.getElementById('ordenar-productos');
   
    const productosDivOrden = document.querySelector('.row.row-cols-1.row-cols-md-3.g-4');

    function ordenarProductos(criterio) {
        let productosAOrdenar = Array.from(productosDivOrden.children);

        productosAOrdenar.sort((a, b) => {
            let valorA, valorB;

            switch (criterio) {
                case 'precio-asc':
                    valorA = parseFloat(a.querySelector('.precio').textContent.replace('$', ''));
                    valorB = parseFloat(b.querySelector('.precio').textContent.replace('$', ''));
                    return valorA - valorB;
                case 'precio-desc':
                    valorA = parseFloat(a.querySelector('.precio').textContent.replace('$', ''));
                    valorB = parseFloat(b.querySelector('.precio').textContent.replace('$', ''));
                    return valorB - valorA;
                case 'nombre-asc':
                    valorA = a.querySelector('.nombre-producto').textContent.toLowerCase();
                    valorB = b.querySelector('.nombre-producto').textContent.toLowerCase();
                    return valorA.localeCompare(valorB);
                case 'nombre-desc':
                    valorA = a.querySelector('.nombre-producto').textContent.toLowerCase();
                    valorB = b.querySelector('.nombre-producto').textContent.toLowerCase();
                    return valorB.localeCompare(valorA);
                default:
                    return 0;
            }
        });

        productosDivOrden.innerHTML = ''; //Limpia el contenedor
        productosAOrdenar.forEach(producto => {
            productosDivOrden.appendChild(producto); //Añade los productos ordenados
        });

        adjuntarEventListenersCarrito();
    }

    ordenarSelect.addEventListener('change', () => {
        const criterioSeleccionado = ordenarSelect.value;
        ordenarProductos(criterioSeleccionado);
    });

    // Inicializar el carrito y los event listeners al cargar la página
    actualizarCarritoVisual();
    adjuntarEventListenersCarrito();
});
    </script>
</body>
</html>
